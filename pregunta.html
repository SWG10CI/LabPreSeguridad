<!DOCTYPE html>
<html>
  <head>
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta name="tipo_contenido" content="text/html;" http-equiv="content-type" charset="utf-8">
	<title>Preguntas</title>
    <link rel='stylesheet' type='text/css' href='estilos/style.css' />
	<link rel='stylesheet' 
		   type='text/css' 
		   media='only screen and (min-width: 530px) and (min-device-width: 481px)'
		   href='estilos/wide.css' />
	<link rel='stylesheet' 
		   type='text/css' 
		   media='only screen and (max-width: 480px)'
		   href='estilos/smartphone.css' />
  </head>
  <body>
  <div id='page-wrap'>
	<header class='main' id='h1'>
		<span class="right"><a href="registro">Registrarse</a></span>
      		<span class="right"><a href="login">Login</a></span>
      		<span class="right" style="display:none;"><a href="/logout">Logout</a></span>
		<h2>Quiz: el juego de las preguntas</h2>
    </header>
	<nav class='main' id='n1' role='navigation'>
		<span><a href='layout.html'>Inicio</a></spam>
		<span><a href='pregunta.html'>Preguntas</a></spam>
		<span><a href='creditos.html'>Creditos</a></spam>
	</nav>
    <section class="main" id="s1">
    
	<div>

		<form enctype="multipart/form-data" onreset="rmvImg()" style="float: left" id='fpreguntas' name='fpreguntas' action=InsertarPreguntaConFoto.php method="post">

			<table>	
				
				<tr>
					<td>
					<span>Email*: </span>
			   		</td>
			   		<td><input type="text" id="mail" name="mail"></td>

				</tr>
				<tr>
					<td>
					<span>Enunciado*: </span>
					</td>
					<td>
					<input type="text" id=enunciado name="enunciado">
					</td>
				</tr>
				<tr>
					<td><span>Repuesta Correcta*: </span></td>
					<td><input type="text" id="Rcor"  name="Rcor"></td>
				</tr>
				<tr>
					<td><span>Repuesta Incorrecta 1*: </span></td>
					<td><input type="text" id="RIncor1" name="RIncor1">	</td>
				</tr>	
				
				<tr>
					<td><span>Repuesta Incorrecta 2*: </span></td>
					<td><input type="text" id="RIncor2" name="RIncor2"></td>		
				</tr>

				<tr>
					<td><span>Repuesta Incorrecta 3*: </span></td>
					<td><input type="text" id="RIncor3" name="RIncor3"></td>
				</tr>

				<tr>
					<td><span>Complejidad (1-5)*: </span></td>
					<td><input type="text" id="complej" name="complej"></td>
				</tr>

				<tr>
					<td><span>Tema de la pregunta*: </span></td>
					<td><input type="text"  id ="tema" name="tema"></td>
				</tr>

			</table>

			<br>



				<span id="hldr"></span>
				<input id="fileChos" type="file" name="pic" accept="image/*"  onchange="showImg(this)">
				<br>
				<input  style="margin-top: 20px" id="submit" type="submit" value="Enviar Pregunta"></td>
				<input style="margin-top: 20px" id="rst" type="reset" value="Borrar campos e imagen"></td>

		</form>




	</div>
    </section>
	<footer class='main' id='f1'>
		<p><a href="http://es.wikipedia.org/wiki/Quiz" target="_blank">Que es un Quiz?</a></p>
		<a href='https://github.com/SWG10CI/Lab2A'>Link GITHUB</a>
	</footer>
</div>


<script>

	function rmvImg(){
			$('#imgPrev').remove();	   						
	}


	function showImg(input){

		rmvImg();
		$('#hldr').append('<img id="imgPrev" src="img/imgPrev.png" style="width:150px;height:150px;float: left; border:2px solid black ;margin-right:30px ">');
		var reader = new FileReader();
		reader.onload = function (e) {
            $('#imgPrev').attr('src', e.target.result);
        }
		reader.readAsDataURL(input.files[0]);

	}


	$(document).ready(function() {
			 $('#submit').click(function(){

			if ($("#enunciado").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#mail").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#Rcor").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#RIncor1").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#RIncor2").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#RIncor3").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#complej").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}
			if ($("#tema").val() == ""){
				alert("No se permiten campos vacios");
				return false;
			}

			var ok = $("#mail").val().match(/^([a-zA-Z])+([0-9]{3})+(@ikasle.ehu.)+(es|eus)$/);
			
			if(!(ok)){
				alert("El correo introducido no tiene la estructura adecuada");
				return false;
			}

			var ok = $("#complej").val().match(/^([1-5])$/);

			if(!(ok)){
				alert("La complejidad debe ser un n√∫mero entre 1 y 5");
				return false;
			}	

				
			if ($("#enunciado").val().length<10 ){
				alert("El enunciado debe contener al menos 10 caracteres");
				return false;	
			}

			return true;

			});
		});



</script>







</body>
</html>
